<!doctype html><html lang=en-us dir=ltr><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="
  EAB (External Account Binding)
  #

To enforce quota limits, provide technical support, or prevent abuse, some ACME
CAs may require an existing account in a non-ACME system, such as a CA customer
database, as a prerequisite for creating new ACME accounts. This account
association is called EAB (External Account Binding). It is specified in
RFC 8555.
CAs having this requirement advertise it by setting the
meta.externalAccountRequired field to true in the JSON object returned by
the ACME Directory URL."><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="http://localhost:1313/acme/eab/"><meta property="og:site_name" content="ACME and the WebPKI"><meta property="og:title" content="EAB (External Account Binding)"><meta property="og:description" content="EAB (External Account Binding) # To enforce quota limits, provide technical support, or prevent abuse, some ACME CAs may require an existing account in a non-ACME system, such as a CA customer database, as a prerequisite for creating new ACME accounts. This account association is called EAB (External Account Binding). It is specified in RFC 8555.
CAs having this requirement advertise it by setting the meta.externalAccountRequired field to true in the JSON object returned by the ACME Directory URL."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="acme"><title>EAB (External Account Binding) | ACME and the WebPKI</title>
<link rel=icon href=/favicon.png><link rel=manifest href=/manifest.json><link rel=canonical href=http://localhost:1313/acme/eab/><link rel=stylesheet href=/book.min.e9f68c3fff3d8236a489d16a9caf6de5e4d1a29c20eb4b5524e42cd30be4d319.css integrity="sha256-6faMP/89gjakidFqnK9t5eTRopwg60tVJOQs0wvk0xk=" crossorigin=anonymous><script async src="https://www.googletagmanager.com/gtag/js?id=G-0LW86NH9LL"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-0LW86NH9LL")}</script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>ACME and the WebPKI</span></a></h2><ul><li><a href=/getting-started/>Getting Started with ACME</a></li><li><a href=/acme/>The ACME Protocol</a><ul><li><a href=/acme/overview/>Overview</a></li><li><a href=/acme/challenges/>Challenge Types</a></li><li><a href=/acme/eab/ class=active>EAB (External Account Binding)</a></li><li><a href=/acme/ari/>ARI (ACME Renewal Information)</a></li></ul></li><li><a href=/webpki/>The WebPKI</a><ul><li><a href=/webpki/cert/>Anatomy of a Certificate</a></li><li><a href=/webpki/cert-lifetime/>Certificate Lifetime</a></li><li><a href=/webpki/caa/>CAA (Certificate Authority Authorization)</a></li><li><a href=/webpki/mpic/>MPIC (Multi-Perspective Issuance Corroboration)</a></li><li><a href=/webpki/ct/>CT (Certificate Transparency)</a></li></ul></li></ul><ul><li><a href=https://github.com/fhchstr/acmeprotocol.dev target=_blank rel=noopener>Contribute to this Website</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label><h3>EAB (External Account Binding)</h3><label for=toc-control></label></div></header><article class="markdown book-article"><h1 id=eab-external-account-binding>EAB (External Account Binding)
<a class=anchor href=#eab-external-account-binding>#</a></h1><p>To enforce quota limits, provide technical support, or prevent abuse, some ACME
CAs may require an existing account in a non-ACME system, such as a CA customer
database, as a prerequisite for creating new ACME accounts. This account
association is called EAB (External Account Binding). It is specified in
<a href=https://datatracker.ietf.org/doc/html/rfc8555#section-7.3.4>RFC 8555</a>.</p><p>CAs having this requirement advertise it by setting the
<code>meta.externalAccountRequired</code> field to <code>true</code> in the JSON object returned by
the <a href=/acme/overview/#directory>ACME Directory URL</a>.</p><p><strong>Before creating an account with such CAs</strong>, clients must retrieve a MAC
(Message Authentication Code) key and a key identifier provided by the CA
<strong>using a mechanism outside of ACME</strong>. Clients can then create a new
<a href=/acme/overview/#account>ACME account</a> by setting the <code>externalAccountBinding</code>
field in the <code>newAccount</code> request. The value of this field must be derived from
the MAC key and key identifier previously provided by the CA.</p><p>The CA returns an <code>externalAccountRequired</code> error if it receives a <code>newAccount</code>
request without the <code>externalAccountBinding</code> field set.</p><h2 id=getting-the-mac-key-and-the-key-identifier>Getting the MAC Key and the Key Identifier
<a class=anchor href=#getting-the-mac-key-and-the-key-identifier>#</a></h2><p>Since these values must be retrieved using a mechanism outside of ACME, each CA
implements its own method to get the MAC key and the key identifier. For
example:</p><ul><li><a href=https://cloud.google.com/certificate-manager/docs/public-ca-tutorial#request-key-hmac>Google Trust Services</a>
requires running the <code>gcloud</code> CLI.</li><li><a href=https://zerossl.com/documentation/acme/generate-eab-credentials/>ZeroSSL</a>
requires using their REST API.</li><li><a href=https://www.ssl.com/guide/ssl-tls-certificate-issuance-and-revocation-with-acme/#ftoc-heading-2>SSL.com</a>
requires using their web dashboard.</li></ul><h2 id=setting-the-externalaccountbinding-field>Setting the <code>externalAccountBinding</code> Field
<a class=anchor href=#setting-the-externalaccountbinding-field>#</a></h2><blockquote class="book-hint danger"><p><strong>Not all ACME clients support EAB</strong>. Make sure to use a client that supports
EAB if your CA requires it.</p></blockquote><p>Refer to the documentation of your ACME client to find out how to pass the EAB
MAC key and the key identifier. For example:</p><ul><li><a href=https://certbot.eff.org/>certbot</a> supports the <code>--eab-hmac-key</code> and
<code>--eab-kid</code> flags.</li><li><a href=https://go-acme.github.io/lego/>LEGO</a> supports the <code>--kid</code> and <code>--hmac</code>
flags; in addition, the <code>--eab</code> flag must also be set.</li><li><a href=https://caddyserver.com/docs/caddyfile/options#acme-eab>Caddy</a> supports an
<code>acme_eab</code> TLS Option.</li></ul></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script><i><a href=https://acmeprotocol.dev/>acmeprotocol.dev</a> is a side project from <a href=https://www.linkedin.com/in/fhchstr/>Fabien Hochstrasser</a>. The opinions expressed on this website are my own and do not reflect the views of my current or former employers.</i></footer><label for=menu-control class="hidden book-menu-overlay"></label></div></main></body></html>